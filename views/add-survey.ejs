<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Feedback - Ella Rises</title>
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=DM+Serif+Display&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-static">
        <div class="nav-container">
            <ul class="nav-menu">
                <!-- Events Dropdown -->
                <li class="nav-dropdown">
                    <a href="/events" class="nav-dropdown-trigger">Events</a>
                    <div class="nav-dropdown-content">
                        <a href="/events?filter=upcoming">Upcoming Events</a>
                        <a href="/events?filter=past">Past Events</a>
                    </div>
                </li>
                <!-- About Dropdown -->
                <li class="nav-dropdown">
                    <a href="/about" class="nav-dropdown-trigger">About</a>
                    <div class="nav-dropdown-content">
                        <a href="/about#mission-vision">Mission & Vision</a>
                        <a href="/about#programs">Programs</a>
                        <a href="/about#mariachi">Mariachi</a>
                        <a href="/about#ballet">Ballet Folklorico</a>
                        <a href="/about#steam">STEAM Workshops</a>
                        <a href="/about#summit">Ella Rises Summit</a>
                        <a href="/about#contact">Contact Us</a>
                    </div>
                </li>
                <li><a href="/donate">Donate</a></li>
            </ul>
            <div class="nav-logo">
                <h1><a href="/" style="text-decoration: none; color: inherit;">ELLA RISES</a></h1>
            </div>
            <% if (isLoggedIn) { %>
                <div class="nav-auth">
                    <div class="user-dropdown">
                        <button class="user-dropdown-btn">
                            <%= first_name %> <%= last_name %> ▼
                        </button>
                        <div class="user-dropdown-content">
                            <a href="/dashboard">User Dashboard</a>
                            <a href="/account-info">Account Info</a>
                            <form action="/logout" method="POST" class="dropdown-logout-form">
                                <button type="submit" class="dropdown-logout-btn">Logout</button>
                            </form>
                        </div>
                    </div>
                </div>
            <% } else { %>
                <div class="nav-auth">
                    <a href="/login" class="btn-signin">Sign In</a>
                    <a href="/register" class="btn-signup">Sign Up</a>
                </div>
            <% } %>
        </div>
    </nav>

    <!-- Breadcrumb -->
    <div class="breadcrumb">
        <a href="/surveys">← Back to My Surveys</a>
    </div>

    <div class="account-info-container">
        <div class="account-info-wrapper">
            <!-- Page Header -->
            <div class="account-info-header">
                <h1 class="account-info-title">Event Feedback</h1>
                <p class="account-info-subtitle">Share your experience from <strong><%= event_name %></strong> on <%= event_date %></p>
            </div>

            <% if (typeof error_message !== 'undefined' && error_message && error_message.length > 0) { %>
                <div class="error-message"><%= error_message %></div>
            <% } %>

            <div class="account-info-form">
                <form action="/add-survey/<%= registration_id %>" method="POST">
                    <!-- Rating Questions Section -->
                    <div class="form-section">
                        <h2 class="form-section-title">Rate Your Experience</h2>
                        <p class="form-section-subtitle">Please rate each aspect from 1 (Poor) to 5 (Excellent)</p>

                        <div class="form-group">
                            <label for="satisfaction_score">Overall Satisfaction</label>
                            <select id="satisfaction_score" name="satisfaction_score" required>
                                <option value="">Select a rating...</option>
                                <option value="5">⭐⭐⭐⭐⭐ Excellent (5)</option>
                                <option value="4">⭐⭐⭐⭐ Very Good (4)</option>
                                <option value="3">⭐⭐⭐ Good (3)</option>
                                <option value="2">⭐⭐ Fair (2)</option>
                                <option value="1">⭐ Poor (1)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="usefulness_score">How useful was this event?</label>
                            <select id="usefulness_score" name="usefulness_score" required>
                                <option value="">Select a rating...</option>
                                <option value="5">⭐⭐⭐⭐⭐ Extremely Useful (5)</option>
                                <option value="4">⭐⭐⭐⭐ Very Useful (4)</option>
                                <option value="3">⭐⭐⭐ Somewhat Useful (3)</option>
                                <option value="2">⭐⭐ Slightly Useful (2)</option>
                                <option value="1">⭐ Not Useful (1)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="instructor_score">Instructor Quality</label>
                            <select id="instructor_score" name="instructor_score" required>
                                <option value="">Select a rating...</option>
                                <option value="5">⭐⭐⭐⭐⭐ Outstanding (5)</option>
                                <option value="4">⭐⭐⭐⭐ Very Good (4)</option>
                                <option value="3">⭐⭐⭐ Good (3)</option>
                                <option value="2">⭐⭐ Fair (2)</option>
                                <option value="1">⭐ Poor (1)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="recommendation_score">Would you recommend this event?</label>
                            <select id="recommendation_score" name="recommendation_score" required>
                                <option value="">Select a rating...</option>
                                <option value="5">⭐⭐⭐⭐⭐ Definitely! (5)</option>
                                <option value="4">⭐⭐⭐⭐ Probably (4)</option>
                                <option value="3">⭐⭐⭐ Maybe (3)</option>
                                <option value="2">⭐⭐ Probably Not (2)</option>
                                <option value="1">⭐ Definitely Not (1)</option>
                            </select>
                        </div>
                    </div>

                    <!-- Comments Section -->
                    <div class="form-section">
                        <h2 class="form-section-title">Additional Comments</h2>
                        <p class="form-section-subtitle">Share any additional thoughts or suggestions</p>

                        <div class="form-group">
                            <label for="survey_comments">Your Comments</label>
                            <textarea id="survey_comments" name="survey_comments" rows="5" placeholder="What did you enjoy most? Any suggestions for improvement?"></textarea>
                        </div>
                    </div>

                    <!-- Submit Buttons -->
                    <div style="display: flex; gap: 1rem; margin-top: 2rem; align-items: center;">
                        <button type="submit" class="auth-submit-btn" style="flex: 1; height: 52px; margin-top: 0;">Submit Feedback</button>
                        <a href="/surveys" style="height: 52px; padding: 0 2rem; background-color: transparent; color: var(--color-text-light); text-decoration: none; border: 2px solid var(--color-text-light); border-radius: 8px; font-weight: 600; font-family: var(--font-primary); display: flex; align-items: center; justify-content: center; box-sizing: border-box;">Cancel</a>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // User dropdown functionality
        document.addEventListener('DOMContentLoaded', function() {
            const userDropdown = document.querySelector('.user-dropdown');
            const dropdownBtn = document.querySelector('.user-dropdown-btn');
            
            if (dropdownBtn) {
                dropdownBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    userDropdown.classList.toggle('active');
                });
            }
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (userDropdown && !userDropdown.contains(e.target)) {
                    userDropdown.classList.remove('active');
                }
            });
        });
    </script>
</body>
</html>