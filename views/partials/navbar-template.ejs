<!-- 
    NEW NAVBAR TEMPLATE
    ====================
    This is the updated navbar structure with hover dropdowns.
    Apply this structure to all pages to maintain consistency.
    
    Key changes:
    1. Events, About, and Dashboard (when logged in) now have hover dropdowns
    2. Dashboard only appears when logged in
    3. Profile dropdown only has Account Info and Logout
    4. Add class "navbar-static" to pages where navbar should always be visible
-->

<!-- Navigation -->
<nav class="navbar navbar-static">
    <div class="nav-container">
        <ul class="nav-menu">
            <!-- Dashboard Dropdown (only when logged in) -->
            <% if (isLoggedIn) { %>
                <li class="nav-dropdown">
                    <a href="/dashboard" class="nav-dropdown-trigger">Dashboard</a>
                    <div class="nav-dropdown-content">
                        <a href="/milestone-progress">Milestone Progress</a>
                        <a href="/surveys">Surveys</a>
                    </div>
                </li>
            <% } %>
            <!-- Events Dropdown -->
            <li class="nav-dropdown">
                <a href="/events" class="nav-dropdown-trigger">Events</a>
                <div class="nav-dropdown-content">
                    <a href="/events?filter=upcoming">Upcoming Events</a>
                    <a href="/events?filter=past">Past Events</a>
                </div>
            </li>
            <!-- About Dropdown -->
            <li class="nav-dropdown">
                <a href="/about" class="nav-dropdown-trigger">About</a>
                <div class="nav-dropdown-content">
                    <a href="/about#mission-vision">Mission & Vision</a>
                    <a href="/about#programs">Programs</a>
                    <a href="/about#mariachi">Mariachi</a>
                    <a href="/about#ballet">Ballet Folklorico</a>
                    <a href="/about#steam">STEAM Workshops</a>
                    <a href="/about#summit">Ella Rises Summit</a>
                    <a href="/about#contact">Contact Us</a>
                </div>
            </li>
            <li><a href="/donate">Donate</a></li>
        </ul>
        <div class="nav-logo">
            <h1><a href="/" style="text-decoration: none; color: inherit;">ELLA RISES</a></h1>
        </div>
        <% if (isLoggedIn) { %>
            <div class="nav-auth">
                <div class="user-dropdown">
                    <button class="user-dropdown-btn">
                        <%= first_name %> <%= last_name %> â–¼
                    </button>
                    <div class="user-dropdown-content">
                        <a href="/account-info">Account Info</a>
                        <form action="/logout" method="POST" class="dropdown-logout-form">
                            <button type="submit" class="dropdown-logout-btn">Logout</button>
                        </form>
                    </div>
                </div>
            </div>
        <% } else { %>
            <div class="nav-auth">
                <a href="/login" class="btn-signin">Sign In</a>
                <a href="/register" class="btn-signup">Sign Up</a>
            </div>
        <% } %>
    </div>
</nav>

<!-- 
    JAVASCRIPT TO ADD TO EACH PAGE
    ==============================
    Add this script before </body> tag.
    Note: No hide-on-scroll behavior since navbar is static.
-->
<script>
    // User dropdown functionality (click-based for profile)
    document.addEventListener('DOMContentLoaded', function() {
        const userDropdown = document.querySelector('.user-dropdown');
        const dropdownBtn = document.querySelector('.user-dropdown-btn');
        
        if (dropdownBtn) {
            dropdownBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                userDropdown.classList.toggle('active');
            });
        }
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            if (userDropdown && !userDropdown.contains(e.target)) {
                userDropdown.classList.remove('active');
            }
        });
    });
</script>
